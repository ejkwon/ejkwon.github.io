<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <style type="text/css">
        /* test rest */
        h1 { font-size:40px; text-transform:capitalize; font-family:Helvetica; text-align:center; }
        textarea { width:100%; height:100%; margin:0; padding:0; overflow-y:scroll; font-size:12px; font-family:Helvetica; }
        .o,
        .t { position:fixed; top:100px; bottom:0px; width:50%; -moz-box-sizing:border-box; box-sizing:border-box; }
        .o { left:0px; padding:0 40px 0 0;}
        .t { right:0px; padding:0 0 0 40px;}
        #transform { position:fixed; left:50%; top:100px; bottom:0px; width:70px; margin-left:-35px; padding:50px 0; font-size:50px; }
    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
</head>
<body>
    <h1>sdsupport Converter</h1>
    <div class="o"><textarea rows="5" cols="100" id="code" placeholder="변환될 모듈단위소스를 넣으세요."></textarea></div>
    <div class="t"><textarea rows="5" cols="100" id="result" readonly="readonly">변환된 소스</textarea></div>
    <div id="hidden" style="width:0; height:0; overflow:hidden;"></div>
    <button type="button" id="transform">&gt;&gt;</button>
    <script>
        var code = $('#code');
        var result = $('#result');
        var button = $('#transform');
        var regExpLt = /</gi;
        var regExpGt = />/gi;
        var regExpLt2 = /&lt;/gi;
        var regExpGt2 = /&gt;/gi;

        function struct(html, name){
var str = '';
str += '<h4>모듈명: '+ name +'</h4>\n';
str += '<div class="info">\n';
str += '\t<h5>설명</h5>\n';
str += '\t<p class="description"></p>\n';
str += '\t<h5>샘플코드</h5>\n';
str += '<pre class="sampleCode"><code>'+ html +'</code></pre>\n';
str += '\t<h5>사용 가능 변수</h5>\n';
str += '\t<div class="var">\n';
str += '\t\t<div id="'+ name +'">\n';
str += '\t\t\t<strong class="title">'+ name +'</strong>\n';
str += '\t\t\t<script type="text/javascript">\n';
str += '\t\t\t\tCODEASSIST.get("'+ name +'","#'+ name +'");\n';
str += '\t\t\t<\/script>\n';
str += '\t\t</div>\n';
str += '\t</div>\n';
str += '</div>\n\n\n';
            return str
        }
        function read(){
            var codeText = code.val();
            $('#hidden').empty().append(codeText);
            
            var str = '';
            var name = $('#hidden').find('> [module]').attr('module');
            if(!name){
                alert('모듈을 찾을수 없습니다.\n모듈을 넣어주세요.');
                return false
            }
            var html = $('#hidden').html().replace(regExpLt, '&lt;').replace(regExpGt, '&gt;');
            str += struct(html, name);
            result.text(str);
        }
        button.click(function(){
            read();
        });
    </script>
    
</body>
</html>

